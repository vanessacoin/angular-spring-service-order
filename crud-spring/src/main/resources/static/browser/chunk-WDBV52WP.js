import{a as ut,b as pt,c as N}from"./chunk-ME7NVCH5.js";import{a as It,b as yt}from"./chunk-NQVXVVEZ.js";import{b as K,f as Q,g as W,j as X,l as Y,m as Z,n as tt,o as et,p as it,r as dt,s as R,y as Dt,z as v}from"./chunk-WTDMHZ6U.js";import{a as F,b as P,c as at,d as B,j as ct,k as st,l as ft,m as Ct,n as _t,o as ht,p as vt,q as Mt,r as gt,s as xt,t as St,u as wt,v as bt,w as Et}from"./chunk-EXFOFES3.js";import{da as ot,e as J,ea as nt,fa as rt,ga as k,ha as mt,i as y,ia as lt,k as T,o as j}from"./chunk-VUXMVQJ4.js";import"./chunk-AESYL7IM.js";import{$b as G,Ab as O,Db as C,Dc as z,Fb as M,Fc as L,Hc as U,Mb as A,Nb as m,Ob as g,Ta as c,Ua as s,Ub as H,Vb as I,Xb as $,Yb as q,Z as x,ha as S,ia as w,jb as d,lb as f,pa as b,qa as E,ub as n,vb as r,wb as u,xb as _,ya as D,yb as h}from"./chunk-VLTS26PK.js";function Vt(t,e){t&1&&(n(0,"th",16),m(1,"Nome"),r())}function At(t,e){if(t&1&&(n(0,"td",17),m(1),r()),t&2){let a=e.$implicit;c(),g(a.name)}}function Ht(t,e){t&1&&(n(0,"th",16),m(1,"CPF"),r())}function $t(t,e){if(t&1&&(n(0,"td",17),m(1),r()),t&2){let a=e.$implicit;c(),g(a.cpf)}}function qt(t,e){t&1&&(n(0,"th",16),m(1,"Telefone"),r())}function Gt(t,e){if(t&1&&(n(0,"td",17),m(1),r()),t&2){let a=e.$implicit;c(),g(a.phone)}}function zt(t,e){t&1&&(n(0,"th",16),m(1,"E-mail"),r())}function Lt(t,e){if(t&1&&(n(0,"td",17),m(1),r()),t&2){let a=e.$implicit;c(),g(a.email)}}function Ut(t,e){if(t&1){let a=O();n(0,"th",18)(1,"button",19),C("click",function(){b(a);let o=M(2);return E(o.onAdd())}),n(2,"mat-icon"),m(3,"add"),r()()()}}function Jt(t,e){if(t&1){let a=O();n(0,"td",17)(1,"button",20),C("click",function(){let o=b(a).$implicit,l=M(2);return E(l.onUpdate(o))}),n(2,"mat-icon"),m(3,"edit"),r()(),n(4,"button",21),C("click",function(){let o=b(a).$implicit,l=M(2);return E(l.onDelete(o))}),n(5,"mat-icon"),m(6,"delete"),r()()()}}function Kt(t,e){t&1&&u(0,"tr",22)}function Qt(t,e){t&1&&u(0,"tr",23)}function Wt(t,e){if(t&1&&(n(0,"div")(1,"table",5),_(2,6),d(3,Vt,2,0,"th",7)(4,At,2,1,"td",8),h(),_(5,9),d(6,Ht,2,0,"th",7)(7,$t,2,1,"td",8),h(),_(8,10),d(9,qt,2,0,"th",7)(10,Gt,2,1,"td",8),h(),_(11,11),d(12,zt,2,0,"th",7)(13,Lt,2,1,"td",8),h(),_(14,12),d(15,Ut,4,0,"th",13)(16,Jt,7,0,"td",8),h(),d(17,Kt,1,0,"tr",14)(18,Qt,1,0,"tr",15),r()()),t&2){let a=M();c(),f("dataSource",a.customersDataSource),c(16),f("matHeaderRowDef",a.displayedColumns),c(),f("matRowDefColumns",a.displayedColumns)}}function Xt(t,e){t&1&&u(0,"mat-spinner")}var Tt=(()=>{let e=class e{constructor(i,o,l,p){this.service=i,this.router=o,this.route=l,this.snackBar=p,this.customer_list=[],this.add=new D(!1),this.edit=new D(!1),this.remove=new D(!1),this.customersDataSource=new Et([]),this.displayedColumns=["name","cpf","phone","email","actions"],this.customers$=this.service.list()}ngOnInit(){this.customers$.subscribe(i=>{this.customersDataSource.data=i}),this.route.queryParams.subscribe(i=>{let o=i.message;o&&this.snackBar.open(o,"",{duration:3e3})})}onAdd(){this.router.navigate(["new"],{relativeTo:this.route})}onUpdate(i){this.router.navigate(["new"],{relativeTo:this.route,queryParams:{id:i.id,name:i.name,cpf:i.cpf,phone:i.phone,email:i.email}})}onDelete(i){confirm("Deletar cliente "+i.name+"?")&&this.service.deleteCustomer(i.id).subscribe({next:()=>{this.snackBar.open("Cliente deletado com sucesso!","",{duration:3e3});let o=this.customersDataSource.data.filter(l=>l.id!==i.id);this.customersDataSource.data=o},error:o=>{this.snackBar.open("Erro ao deletar cliente: "+o.message,"Fechar",{duration:5e3})}})}};e.\u0275fac=function(o){return new(o||e)(s(v),s(T),s(y),s(N))},e.\u0275cmp=S({type:e,selectors:[["app-customer"]],inputs:{customer_list:"customer_list"},outputs:{add:"add",edit:"edit",remove:"remove"},standalone:!0,features:[H([v]),I],decls:8,vars:4,consts:[["loading",""],[1,"customer"],[1,"customer-container","mat-elevation-z8"],[1,"table-wrapper"],[4,"ngIf","ngIfElse"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cpf"],["matColumnDef","phone"],["matColumnDef","email"],["matColumnDef","actions"],["mat-header-cell","","class","action-column",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"action-column"],["mat-mini-fab","","color","accent","aria-label","Adicionar Cliente",1,"action-column-header",3,"click"],["mat-icon-button","","color","primary","aria-label","Editar Cliente",3,"click"],["mat-icon-button","","color","warn","aria-label","Remover Cliente",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,l){if(o&1&&(n(0,"mat-card",1)(1,"mat-card-content")(2,"section",2)(3,"div",3),d(4,Wt,19,3,"div",4),$(5,"async"),r(),d(6,Xt,1,0,"ng-template",null,0,G),r()()()),o&2){let p=A(7);c(4),f("ngIf",q(5,2,l.customers$))("ngIfElse",p)}},dependencies:[Dt,R,lt,mt,k,rt,nt,bt,ft,_t,gt,ht,Ct,xt,vt,Mt,St,wt,J,B,F,P,pt,ut,z,L],styles:[".table-wrapper[_ngcontent-%COMP%]{max-height:1080px;overflow-y:auto;overflow-x:auto;width:100%;border-radius:16px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.customer-container[_ngcontent-%COMP%]{height:100%;overflow:auto}.action-column[_ngcontent-%COMP%]{flex:0 0 125px}.action-column-header[_ngcontent-%COMP%]{margin:0 auto}"]});let t=e;return t})();var kt=(()=>{let e=class e{constructor(i,o,l,p,Pt){this.formBuilder=i,this.service=o,this.snackBar=l,this.router=p,this.route=Pt,this.isEditing=!1,this.form=this.formBuilder.group({id:[null],name:[null],cpf:[null],phone:[null],email:[null]})}ngOnInit(){this.route.queryParams.subscribe(i=>{i.id&&(this.isEditing=!0,this.form.patchValue({id:i.id,name:i.name,cpf:i.cpf,phone:i.phone,email:i.email}))})}onSave(){this.form.valid&&(this.isEditing?this.service.updateCustomer(this.form.value.id,this.form.value).subscribe({next:()=>{this.router.navigate(["/customer"],{queryParams:{message:"Cliente atualizado com sucesso!"}})},error:i=>{this.snackBar.open("Erro ao atualizar cliente: "+i.message,"Fechar",{duration:5e3})}}):this.service.saveCustomer(this.form.value).subscribe({next:()=>{this.router.navigate(["/customer"],{queryParams:{message:"Cliente salvo com sucesso!"}})},error:i=>{this.snackBar.open("Erro ao salvar cliente: "+i.message,"",{duration:5e3})}}))}onCancel(){this.router.navigate(["/customer"])}};e.\u0275fac=function(o){return new(o||e)(s(tt),s(v),s(N),s(T),s(y))},e.\u0275cmp=S({type:e,selectors:[["app-customer-form"]],standalone:!0,features:[I],decls:18,vars:1,consts:[[3,"formGroup"],[1,"full-width"],["matInput","","placeholder","Nome","formControlName","name"],["matInput","","placeholder","CPF","formControlName","cpf"],["matInput","","placeholder","Phone","formControlName","phone"],["matInput","","placeholder","Email","formControlName","email"],[1,"actions-center"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",1,"btn-space",3,"click"]],template:function(o,l){o&1&&(n(0,"mat-card")(1,"mat-toolbar"),m(2,"Cadastro de Cliente"),r(),n(3,"mat-card-content")(4,"form",0)(5,"mat-form-field",1),u(6,"input",2),r(),n(7,"mat-form-field",1),u(8,"input",3),r(),n(9,"mat-form-field",1),u(10,"input",4),r(),n(11,"mat-form-field",1),u(12,"input",5),r()()(),n(13,"mat-card-actions",6)(14,"button",7),C("click",function(){return l.onSave()}),m(15,"Salvar"),r(),n(16,"button",8),C("click",function(){return l.onCancel()}),m(17,"Cancelar"),r()()()),o&2&&(c(4),f("formGroup",l.form))},dependencies:[st,ct,it,X,K,Q,W,Y,Z,R,dt,B,F,at,P,yt,It,k,ot],styles:["mat-card[_ngcontent-%COMP%]{max-width:80%;margin:2em auto;text-align:center}mat-card-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-top:5px}.full-width[_ngcontent-%COMP%]{width:100%}.min-width[_ngcontent-%COMP%]{width:100%;min-width:150px}.btn-space[_ngcontent-%COMP%]{margin-left:15px}.actions-center[_ngcontent-%COMP%]{justify-content:center}"]});let t=e;return t})();var Yt=[{path:"",component:Tt},{path:"new",component:kt}],Ft=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=w({type:e}),e.\u0275inj=x({imports:[j.forChild(Yt),j]});let t=e;return t})();var Oe=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=w({type:e}),e.\u0275inj=x({imports:[U,et,Ft]});let t=e;return t})();export{Oe as CustomerModule};
