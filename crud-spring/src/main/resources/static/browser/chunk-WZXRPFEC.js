import{a as ge,b as be,c as R}from"./chunk-ME7NVCH5.js";import{a as je,b as $e}from"./chunk-NQVXVVEZ.js";import{a as Ae,b as He,c as M}from"./chunk-FRZTQ2R2.js";import{b as ie,f as ne,g as oe,j as re,l as ae,m as le,n as me,o as ce,p as T,r as Se,s as N,y as Re,z as Oe}from"./chunk-WTDMHZ6U.js";import{a as F,b as P,c as he,d as B,e as Ce,j as Me,k as xe,l as Ee,m as Ve,n as we,o as ye,p as Ie,q as De,r as Te,s as ke,t as Fe,u as Pe,v as Be,w as Ne}from"./chunk-EXFOFES3.js";import{$ as de,ca as se,da as pe,e as te,ea as ue,fa as fe,ga as k,ha as _e,i as I,ia as ve,k as D,o as j}from"./chunk-VUXMVQJ4.js";import"./chunk-AESYL7IM.js";import{$b as X,Ab as O,Db as C,Dc as Y,Fb as x,Fc as Z,Hc as ee,Mb as U,Nb as l,Ob as _,Qb as J,S as q,Ta as c,Ua as d,Ub as K,Vb as y,Xb as Q,Yb as W,Z as S,a as A,b as H,ha as g,ia as b,jb as s,lb as h,pa as E,qa as V,rb as G,sb as z,tb as L,ub as n,vb as r,wb as p,xb as u,ya as w,yb as f}from"./chunk-VLTS26PK.js";function Ye(e,t){if(e&1&&(n(0,"mat-option",8),l(1),r()),e&2){let a=t.$implicit;h("value",a.id),c(),J("",a.name," ",a.cpf,"(CPF) ",a.phone,"(Tel)")}}var qe=(()=>{let t=class t{constructor(i,o,m,v,Le,Ue){this.service=i,this.customerService=o,this.formBuilder=m,this.snackBar=v,this.router=Le,this.route=Ue,this.customers=[],this.isEditing=!1,this.form=this.formBuilder.group({id:[null],brand:[null],model:[null],plate:[null],year:[null],color:[null],customer:[null]})}ngOnInit(){this.customerService.list().pipe(q(i=>(this.customers=i,this.route.queryParams))).subscribe(i=>{i.id&&(this.isEditing=!0,this.form.patchValue({id:i.id,brand:i.brand,model:i.model,plate:i.plate,year:i.year,color:i.color,customer:+i.customer}))})}onSave(){if(this.form.valid){let i=H(A({},this.form.value),{customer:{id:this.form.value.customer}});this.isEditing?this.service.updateVehicle(this.form.value.id,i).subscribe({next:()=>{this.router.navigate(["/vehicle"],{queryParams:{message:"Ve\xEDculo atualizado com sucesso!"}})},error:o=>{this.snackBar.open("Erro ao atualizar ve\xEDculo: "+o.message,"Fechar",{duration:5e3})}}):this.service.saveVehicle(i).subscribe({next:()=>{this.router.navigate(["/vehicle"],{queryParams:{message:"Ve\xEDculo salvo com sucesso!"}})},error:o=>{this.snackBar.open("Erro ao salvar ve\xEDculo: "+o.message,"",{duration:5e3})}})}}onCancel(){this.router.navigate(["/vehicle"])}};t.\u0275fac=function(o){return new(o||t)(d(M),d(Oe),d(me),d(R),d(D),d(I))},t.\u0275cmp=g({type:t,selectors:[["app-vehicle-form"]],standalone:!0,features:[y],decls:26,vars:1,consts:[[3,"formGroup"],[1,"full-width"],["matInput","","placeholder","Marca","formControlName","brand"],["matInput","","placeholder","Modelo","formControlName","model"],["matInput","","placeholder","Placa","formControlName","plate"],["matInput","","placeholder","Ano","formControlName","year"],["matInput","","placeholder","Cor","formControlName","color"],["formControlName","customer"],[3,"value"],[1,"actions-center"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",1,"btn-space",3,"click"]],template:function(o,m){o&1&&(n(0,"mat-card")(1,"mat-toolbar"),l(2,"Cadastro de Ve\xEDculo"),r(),n(3,"mat-card-content")(4,"form",0)(5,"mat-form-field",1),p(6,"input",2),r(),n(7,"mat-form-field",1),p(8,"input",3),r(),n(9,"mat-form-field",1),p(10,"input",4),r(),n(11,"mat-form-field",1),p(12,"input",5),r(),n(13,"mat-form-field",1),p(14,"input",6),r(),n(15,"mat-form-field",1)(16,"mat-label"),l(17,"Cliente"),r(),n(18,"mat-select",7),z(19,Ye,2,4,"mat-option",8,G),r()()()(),n(21,"mat-card-actions",9)(22,"button",10),C("click",function(){return m.onSave()}),l(23,"Salvar"),r(),n(24,"button",11),C("click",function(){return m.onCancel()}),l(25,"Cancelar"),r()()()),o&2&&(c(4),h("formGroup",m.form),c(15),L(m.customers))},dependencies:[xe,Me,Ce,T,re,ie,ne,oe,ae,le,N,Se,B,F,he,P,$e,je,k,pe,He,Ae,de,se],styles:["mat-card[_ngcontent-%COMP%]{max-width:80%;margin:2em auto;text-align:center}mat-card-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-top:5px}.full-width[_ngcontent-%COMP%]{width:100%}.min-width[_ngcontent-%COMP%]{width:100%;min-width:150px}.btn-space[_ngcontent-%COMP%]{margin-left:15px}.actions-center[_ngcontent-%COMP%]{justify-content:center}"]});let e=t;return e})();function Ze(e,t){e&1&&(n(0,"th",19),l(1,"Marca"),r())}function et(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.brand)}}function tt(e,t){e&1&&(n(0,"th",19),l(1,"Modelo"),r())}function it(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.model)}}function nt(e,t){e&1&&(n(0,"th",19),l(1,"Placa"),r())}function ot(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.plate)}}function rt(e,t){e&1&&(n(0,"th",19),l(1,"Ano"),r())}function at(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.year)}}function lt(e,t){e&1&&(n(0,"th",19),l(1,"Cor"),r())}function mt(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.color)}}function ct(e,t){e&1&&(n(0,"th",19),l(1,"ID Cliente"),r())}function dt(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.customer.id)}}function st(e,t){e&1&&(n(0,"th",19),l(1,"Nome do Cliente"),r())}function pt(e,t){if(e&1&&(n(0,"td",20),l(1),r()),e&2){let a=t.$implicit;c(),_(a.customer==null?null:a.customer.name)}}function ut(e,t){if(e&1){let a=O();n(0,"th",19)(1,"button",21),C("click",function(){E(a);let o=x(2);return V(o.onAdd())}),n(2,"mat-icon"),l(3,"add"),r()()()}}function ft(e,t){if(e&1){let a=O();n(0,"td",22)(1,"button",23),C("click",function(){let o=E(a).$implicit,m=x(2);return V(m.onUpdate(o))}),n(2,"mat-icon"),l(3,"edit"),r()(),n(4,"button",24),C("click",function(){let o=E(a).$implicit,m=x(2);return V(m.onDelete(o))}),n(5,"mat-icon"),l(6,"delete"),r()()()}}function ht(e,t){e&1&&p(0,"tr",25)}function _t(e,t){e&1&&p(0,"tr",26)}function vt(e,t){if(e&1&&(n(0,"div")(1,"table",5),u(2,6),s(3,Ze,2,0,"th",7)(4,et,2,1,"td",8),f(),u(5,9),s(6,tt,2,0,"th",7)(7,it,2,1,"td",8),f(),u(8,10),s(9,nt,2,0,"th",7)(10,ot,2,1,"td",8),f(),u(11,11),s(12,rt,2,0,"th",7)(13,at,2,1,"td",8),f(),u(14,12),s(15,lt,2,0,"th",7)(16,mt,2,1,"td",8),f(),u(17,13),s(18,ct,2,0,"th",7)(19,dt,2,1,"td",8),f(),u(20,14),s(21,st,2,0,"th",7)(22,pt,2,1,"td",8),f(),u(23,15),s(24,ut,4,0,"th",7)(25,ft,7,0,"td",16),f(),s(26,ht,1,0,"tr",17)(27,_t,1,0,"tr",18),r()()),e&2){let a=t.ngIf,i=x();c(),h("dataSource",a),c(25),h("matHeaderRowDef",i.displayedColumns),c(),h("matRowDefColumns",i.displayedColumns)}}function Ct(e,t){e&1&&p(0,"mat-spinner")}var Ge=(()=>{let t=class t{constructor(i,o,m,v){this.service=i,this.router=o,this.route=m,this.snackBar=v,this.vehicle_list=[],this.add=new w(!1),this.edit=new w(!1),this.remove=new w(!1),this.vehiclesDataSource=new Ne([]),this.displayedColumns=["brand","model","plate","year","color","customerName","actions"],this.vehicles$=this.service.list()}ngOnInit(){this.vehicles$.subscribe(i=>{this.vehiclesDataSource.data=i}),this.route.queryParams.subscribe(i=>{let o=i.message;o&&this.snackBar.open(o,"",{duration:3e3})})}onAdd(){this.router.navigate(["new"],{relativeTo:this.route})}onUpdate(i){this.router.navigate(["new"],{relativeTo:this.route,queryParams:{id:i.id,brand:i.brand,model:i.model,plate:i.plate,year:i.year,color:i.color,customer:i.customer.id}})}onDelete(i){confirm("Deletar ve\xEDculo "+i.model+" "+i.brand+" "+i.color+"?")&&this.service.deleteVehicle(i.id).subscribe({next:()=>{this.snackBar.open("Ve\xEDculo deletado com sucesso!","",{duration:3e3});let o=this.vehiclesDataSource.data.filter(m=>m.id!==i.id);this.vehiclesDataSource.data=o},error:o=>{this.snackBar.open("Erro ao deletar cliente: "+o.message,"Fechar",{duration:5e3})}})}};t.\u0275fac=function(o){return new(o||t)(d(M),d(D),d(I),d(R))},t.\u0275cmp=g({type:t,selectors:[["app-vehicle"]],inputs:{vehicle_list:"vehicle_list"},outputs:{add:"add",edit:"edit",remove:"remove"},standalone:!0,features:[K([M]),y],decls:8,vars:4,consts:[["loading",""],[1,"vehicle"],[1,"vehicle-container","mat-elevation-z8"],[1,"table-wrapper"],[4,"ngIf","ngIfElse"],["mat-table","",3,"dataSource"],["matColumnDef","brand"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","model"],["matColumnDef","plate"],["matColumnDef","year"],["matColumnDef","color"],["matColumnDef","id_customer"],["matColumnDef","customerName"],["matColumnDef","actions",1,"action-column"],["mat-cell","","class","action-column-data",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-mini-fab","","color","accent","aria-label","Adicionar Ve\xEDculo",1,"action-column-header",3,"click"],["mat-cell","",1,"action-column-data"],["mat-icon-button","","color","primary","aria-label","Editar Ve\xEDculo",3,"click"],["mat-icon-button","","color","warn","aria-label","Remover Ve\xEDculo",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,m){if(o&1&&(n(0,"mat-card",1)(1,"mat-card-content")(2,"section",2)(3,"div",3),s(4,vt,28,3,"div",4),Q(5,"async"),r(),s(6,Ct,1,0,"ng-template",null,0,X),r()()()),o&2){let v=U(7);c(4),h("ngIf",W(5,2,m.vehicles$))("ngIfElse",v)}},dependencies:[Re,N,ve,_e,k,fe,ue,Be,Ee,we,Te,ye,Ve,ke,Ie,De,Fe,Pe,te,B,F,P,Y,Z,be,ge],styles:[".table-wrapper[_ngcontent-%COMP%]{max-height:1100px;overflow-y:auto;overflow-x:auto;width:100%;border-radius:16px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.vehicle-container[_ngcontent-%COMP%]{height:400px;overflow:auto}.action-column[_ngcontent-%COMP%]{flex:0 0 125px}.action-column-header[_ngcontent-%COMP%]{margin:0 auto}"]});let e=t;return e})();var Mt=[{path:"",component:Ge},{path:"new",component:qe}],ze=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=b({type:t}),t.\u0275inj=S({imports:[j.forChild(Mt),j]});let e=t;return e})();var di=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=b({type:t}),t.\u0275inj=S({imports:[ee,ze,ce,T]});let e=t;return e})();export{di as VehicleModule};
